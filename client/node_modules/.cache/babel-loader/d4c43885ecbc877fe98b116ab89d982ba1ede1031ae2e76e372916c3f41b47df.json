{"ast":null,"code":"var _jsxFileName = \"/home/rakib/Downloads/Web Application Framework/1. final assignemnt/real-time-blog-platform/client/src/pages/AuthorProfilePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Card, Button, Spinner } from 'react-bootstrap';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AuthorProfilePage() {\n  _s();\n  const {\n    authorId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const [posts, setPosts] = useState([]);\n  const [author, setAuthor] = useState(null);\n  const [subscribed, setSubscribed] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const isSelf = user && user._id === authorId;\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        var _authorPosts$;\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/posts`);\n        const authorPosts = res.data.filter(post => post.author._id === authorId);\n        setPosts(authorPosts);\n        setAuthor(((_authorPosts$ = authorPosts[0]) === null || _authorPosts$ === void 0 ? void 0 : _authorPosts$.author) || null);\n        if (user && authorId !== user._id) {\n          const subRes = await axios.get(`${process.env.REACT_APP_API_URL}/api/subscriptions`, {\n            withCredentials: true\n          });\n          setSubscribed(subRes.data.subscriptions.some(sub => sub.id === authorId));\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [authorId, user]);\n  const handleToggleSubscription = async () => {\n    const url = `${process.env.REACT_APP_API_URL}/api/subscriptions/${authorId}`;\n    try {\n      if (subscribed) {\n        await axios.delete(url, {\n          withCredentials: true\n        });\n        setSubscribed(false);\n      } else {\n        await axios.post(url, {}, {\n          withCredentials: true\n        });\n        setSubscribed(true);\n      }\n    } catch (err) {\n      console.error(err);\n      alert('Subscription action failed');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Spinner, {\n    animation: \"border\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [author ? author.name : 'Author', \"'s Posts (\", posts.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), !isSelf && user && /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleToggleSubscription,\n      variant: subscribed ? 'secondary' : 'primary',\n      className: \"my-3\",\n      size: \"sm\",\n      children: subscribed ? 'Unsubscribe' : 'Subscribe'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), posts.map(post => /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: [post.content.slice(0, 100), \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/posts/${post._id}`,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            children: \"Read More\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthorProfilePage, \"IssI/61qysPibEWVIXZFppSLoas=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = AuthorProfilePage;\nexport default AuthorProfilePage;\nvar _c;\n$RefreshReg$(_c, \"AuthorProfilePage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","Card","Button","Spinner","axios","useAuth","jsxDEV","_jsxDEV","AuthorProfilePage","_s","authorId","user","posts","setPosts","author","setAuthor","subscribed","setSubscribed","loading","setLoading","isSelf","_id","fetchData","_authorPosts$","res","get","process","env","REACT_APP_API_URL","authorPosts","data","filter","post","subRes","withCredentials","subscriptions","some","sub","id","err","console","error","handleToggleSubscription","url","delete","alert","animation","fileName","_jsxFileName","lineNumber","columnNumber","children","name","length","onClick","variant","className","size","map","Body","Title","title","Text","content","slice","to","_c","$RefreshReg$"],"sources":["/home/rakib/Downloads/Web Application Framework/1. final assignemnt/real-time-blog-platform/client/src/pages/AuthorProfilePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Card, Button, Spinner } from 'react-bootstrap';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\n\nfunction AuthorProfilePage() {\n  const { authorId } = useParams();\n  const { user } = useAuth();\n  const [posts, setPosts] = useState([]);\n  const [author, setAuthor] = useState(null);\n  const [subscribed, setSubscribed] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const isSelf = user && user._id === authorId;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/posts`);\n        const authorPosts = res.data.filter(post => post.author._id === authorId);\n        setPosts(authorPosts);\n        setAuthor(authorPosts[0]?.author || null);\n        if (user && authorId !== user._id) {\n          const subRes = await axios.get(`${process.env.REACT_APP_API_URL}/api/subscriptions`, {\n            withCredentials: true\n          });\n          setSubscribed(subRes.data.subscriptions.some(sub => sub.id === authorId));\n        }\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [authorId, user]);\n\n  const handleToggleSubscription = async () => {\n    const url = `${process.env.REACT_APP_API_URL}/api/subscriptions/${authorId}`;\n    try {\n      if (subscribed) {\n        await axios.delete(url, { withCredentials: true });\n        setSubscribed(false);\n      } else {\n        await axios.post(url, {}, { withCredentials: true });\n        setSubscribed(true);\n      }\n    } catch (err) {\n      console.error(err);\n      alert('Subscription action failed');\n    }\n  };\n\n  if (loading) return <Spinner animation=\"border\" />;\n\n  return (\n    <div>\n      <h3>{author ? author.name : 'Author'}'s Posts ({posts.length})</h3>\n      {!isSelf && user && (\n        <Button\n          onClick={handleToggleSubscription}\n          variant={subscribed ? 'secondary' : 'primary'}\n          className=\"my-3\"\n          size=\"sm\"\n        >\n          {subscribed ? 'Unsubscribe' : 'Subscribe'}\n        </Button>\n      )}\n      {posts.map(post => (\n        <Card key={post._id} className=\"mb-3\">\n          <Card.Body>\n            <Card.Title>{post.title}</Card.Title>\n            <Card.Text>{post.content.slice(0, 100)}...</Card.Text>\n            <Link to={`/posts/${post._id}`}>\n              <Button size=\"sm\">Read More</Button>\n            </Link>\n          </Card.Body>\n        </Card>\n      ))}\n    </div>\n  );\n}\n\nexport default AuthorProfilePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}